<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>U612494 是厄运，还是救赎【陨星】</title>
    <link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/katex@0.16.22/dist/katex.min.css">
    <script src="https://cdn.jsdmirror.com/npm/katex@0.16.22/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdmirror.com/npm/katex@0.16.22/dist/contrib/auto-render.min.js"
      onload="renderMathInElement(document.body);"></script>
    <link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdmirror.com/npm/marked@4.0.0/marked.min.js"></script>
    <script src="https://cdn.jsdmirror.com/npm/clipboard@2.0.11/dist/clipboard.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        h2, h3 {
            color: #34495e;
        }
        .katex {
            font-size: 1.1em;
        }
        .input-output {
            margin: 20px 0;
        }
        .input-output h4 {
            margin-top: 0;
            color: #2c3e50;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #bdc3c7;
            padding: 10px;
            text-align: center;
        }
        th {
            background-color: #ecf0f1;
        }
        .poem {
            background-color: #fef9e7;
            padding: 15px;
            border-left: 4px solid #f39c12;
            margin: 20px 0;
            font-style: italic;
        }
        .hidden {
            display: none;
        }
        .markdown-content {
            line-height: 1.8;
        }
        .markdown-content p {
            margin: 1em 0;
        }
        .markdown-content ul, .markdown-content ol {
            padding-left: 2em;
        }
        pre code {
			font-family: 'Consolas';
			display: block;
			padding: 12px;
			padding-left: 20px;
			margin: 2rem 0;
			background: #f8fafc;
			border-radius: 10px;
			border: 1px solid #e2e8f0;
			overflow-x: auto;
			overflow-y: auto;
			line-height: 1.6 !important;
			font-size: 0.95rem !important;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
		}
    table {
			border-collapse: collapse !important;
			border-spacing: 0 !important;
			overflow-x: auto;
			min-width: 600px !important;
			font-size: 1rem !important;
			width: 100%;
			margin: 2rem 0;
			border-radius: 10px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			border: 1px solid #e2e8f0;
			background: white;
		}

		thead {
			display: table-header-group;
			vertical-align: middle;
			unicode-bidi: isolate;
			border-color: inherit;
			border-radius: 10px;
		}

		tbody {
			border-radius: 10px;
		}

		tr {
			display: table-row;
			vertical-align: inherit;
			unicode-bidi: isolate;
			border-color: inherit;
		}

		th {
			background: #f8fafc !important;
			font-weight: 600 !important;
			color: #374151 !important;
			border-bottom: 2px solid #e2e8f0 !important;
		}

		th,
		td {
			padding: 12px 16px !important;
			font-size: 1rem !important;
			border-bottom: 1px solid #e2e8f0;
			border-right: 1px solid rgba(34, 36, 38, .1);
			white-space: nowrap;
		}

		table tbody tr:hover {
			background-color: #f8fafc;
		}

		.codecopy-btn {
			opacity: 0.7 !important;
			min-height: 1em;
			outline: 0;
			vertical-align: baseline;
			position: absolute;
			top: 10px !important;
			right: 10px !important;
			background: #f8fafc;
			padding: 6px 10px !important;
			color: rgba(0, 0, 0, 0.6);
			border: 1px solid rgba(0, 0, 0, 0.1);
			box-shadow: transparent 0px 0px 0px 1px inset, rgba(34, 36, 38, 0.15) 0px 0px 0px 0px inset;
			cursor: pointer;
			z-index: 10;
			text-transform: none;
			text-shadow: none;
			font-weight: 700;
			line-height: 1em;
			font-style: normal;
			text-align: center;
			text-decoration: none;
			border-radius: .28571429rem;
			font-size: 0.8rem !important;
			display: inline-block !important;
			padding-block: 1px;
			padding-inline: 6px;
			margin: 0 .25em 0 0;
		}

		.codecopy-btn icon {
			font-weight: 0.8rem !important;
		}

		.codecopy-btn:active {
			background-color: rgb(186, 187, 188);
			color: rgba(0, 0, 0, 0.9);
		}

		.codecopy-btn:hover {
			background: #fff;
			transform: translateY(-1px);
			background-color: rgb(202, 203, 205);
			box-shadow: transparent 0px 0px 0px 1px inset, rgba(34, 36, 38, 0.15) 0px 0px 0px 0px inset;
			color: rgba(0, 0, 0, 0.8);
		}

		.codecopy-btn:focus {
			background-color: rgb(202, 203, 205);
			color: rgba(0, 0, 0, 0.8);
		}
    </style>
</head>
<body>
    <div class="container">
        <div id="markdown-source" class="hidden">
# U612494 是厄运，还是救赎【陨星】

## 题目背景

# 陨星世界的历史：

群星闪耀，天上熠熠生辉。五颗星星如众星首领，盎然绽放光彩于世间。穿越时空，照亮五片大陆、五个次元，守护一片安宁与和谐。
$$
\textcolor{purple}{-五星陨世，-}\newline
\textcolor{orange}{-是星之者对世界的救赎，还是……-}\newline
\textcolor{blue}{-携带千万年亿万年厄运与仇怨，-}\newline
\textcolor{red}{-毁灭这一方世间……-}\newline
\textcolor{black}{-或是，命运与轮回本既如此。-}
$$

## 题目描述

天空如一张幕布，**是一个 $n \times m$ 的二维平面**。平面上有 $n \times m$ 个方格，有 $k$ 个星组，第 $i$ 个星组在 $(x_i,y_i)$ 处。星组中星星的数量我们尚不可统计。先在的时代，是混沌时代，群星陨落，预示灾厄。星组能用星辰之力安定一方天空太平，但当星组中有星星陨落世间，星组将失去安定一方天空太平的能力。从现在算起，$q$ 个时刻内，每一个时刻内，有 2 种发生事件。1 事件是第 $i$ 个星组中陨落了一颗星星，2 事件是天空 $(x1,y1),(x2,y2)$ 中有多少个星组在安定这一方天地。**（第一个给出的是左上角坐标，第二个给出的是右下角坐标。天空的左上角坐标是 $(1,1)$，右下角坐标是 $(n,m)$。）**

## 输入格式

- 第一行输入三个正整数 $n,m,k$。代表天空幕布的大小和星组的个数。
- 接下来输入 $k$ 行，每行两个正整数 $x_i,y_i$。代表第 $i$ 个星组的坐标。
- 第 $k + 1$ 行输入一个正整数 $q$。代表接下来有 $q$ 个时刻。
- - 第 $k + 2$ 行到 $k + q + 1$ 行，每行一个事件描述。
  - 首先输入一个事件类型变量 $opt_i$。若 $opt_i$ 等于 $1$，再输入一个正整数 $j$，代表第 $j$ 个星组陨落了一颗星；若 $opt_i$ 等于 $2$，输入四个正整数 $x1, y1, x2, y2$，代表一方天空的范围。

## 输出格式

若当前时刻是第二个事件，也就是 $opt_i$ 等于 $2$，输出询问天空范围内有多少个星组在安定此方天空，按询问时的时刻输出。

## 输入输出样例 #1

### 输入 #1

```
4 6 12
4 1
1 6
3 2
2 1
1 1
1 5
4 6
3 5
2 3
2 6
4 5
3 6
2
2 2 2 4 3
2 1 4 3 6
```

### 输出 #1

```
2
5
```

## 输入输出样例 #2

### 输入 #2

```
4 6 2
4 4
2 1
1
2 3 4 3 5
```

### 输出 #2

```
0
```

## 输入输出样例 #3

### 输入 #3

```
6 2 12
4 2
2 1
1 1
2 2
3 2
5 1
4 1
6 1
5 2
6 2
1 2
3 1
1
2 2 2 2 2
```

### 输出 #3

```
1
```

## 输入输出样例 #4

### 输入 #4

```
5 3 15
2 3
2 2
4 2
1 2
3 3
1 3
5 2
5 1
2 1
3 2
1 1
5 3
4 3
4 1
3 1
10
2 1 1 4 3
2 5 1 5 3
1 15
1 14
2 2 1 3 1
1 5
1 9
1 11
2 3 1 4 2
1 2
```

### 输出 #4

```
12
3
1
2
```

## 说明/提示

数据均为随机生成，所有子任务满足 $n \le 1000,m \le 1 \times 10^4,q \le 10^6$。

| 子任务编号 | 分值 |$n,m\le$ | $q\le$ | $k \le$ | 特殊性质 |
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
| $0$ | $24$ |$50$ | $100$ | $\min(n \times m, 800)$ | 无 |
| $1$ | $56$ |$100$ | $1000$ | $\min(n \times m, 2 \times 10^3)$ | 无 |
| $2$ | $20$ |$10^3$ | $10^6$ | $\min(n \times m, 10^4)$ | 无 |
</div>

        <div id="rendered-content" class="markdown-content"></div>
    </div>

    <script>
    // 设置Marked选项
    marked.setOptions({
        gfm: true
    });
    
    // 获取原始Markdown内容
    const markdownSource = document.getElementById('markdown-source').textContent;
    
    // 渲染Markdown
    const renderedContent = marked.parse(markdownSource);
    
    // 将渲染后的内容放入显示区域
    document.getElementById('rendered-content').innerHTML = renderedContent;
    
    document.addEventListener("DOMContentLoaded", function () {
        if (window.renderMathInElement) {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false},
                    {left: "$", right: "$", display: false}
                ],
                throwOnError: false
            });
        } else {
            console.warn("KaTeX auto-render script not loaded yet.");
        }
        addCopyButtons();
    });

    function addCopyButtons() {
			const preElements = document.querySelectorAll('pre code');
			preElements.forEach(codeElement => {
				const button = document.createElement('button');
				button.innerHTML = '<i class="fa-solid fa-copy"></i>';
				button.classList.add('codecopy-btn');

				const div = document.createElement('div');
				div.style = "width:100%;position:relative;";
				div.appendChild(button);
				codeElement.before(div);

				new ClipboardJS(button, {
					text: () => codeElement.innerText.replace(/\n\n/g, "\n")
				}).on('success', e => {
					e.trigger.innerHTML = '<i class="fa-solid fa-check"></i>';
					setTimeout(() => e.trigger.innerHTML = '<i class="fa-solid fa-copy"></i>', 1000);
				}).on('error', e => {
					e.trigger.innerHTML = '<i class="fa-solid fa-xmark"></i>';
					setTimeout(() => e.trigger.innerHTML = '<i class="fa-solid fa-copy"></i>', 1000);
				});
			});
		}
</script>
</body>
</html>
